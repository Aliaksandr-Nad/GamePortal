<div class="wrapper">
  <div class="container">
    <app-navbar></app-navbar>

    <mat-toolbar class= "usertoolbar" color = "primary">
      <ul class = "toolbarlist">
        <button type="button" class="btn btn-lg btn-block" [disabled]="!checkIfAnySelected()" (click)="onBlock()">
            <mat-icon class = "icon" >lock</mat-icon>
        </button>
        <button type="button" class="btn btn-lg btn-block" [disabled]="!checkIfAnySelected()" (click)="onUnBlock()">
          <mat-icon class = "icon" >lock_open</mat-icon>
      </button>

      <button type="button" class="btn btn-lg btn-block" [disabled]="!checkIfAnySelected()" (click)="onDelete()">
        <mat-icon class = "icon" >delete</mat-icon>
        </button>

        <button type="button" class="btn btn-lg btn-block" [disabled]="!checkIfAnySelected()" (click)="onRoleChange()">
          <mat-icon class = "icon" >supervisor_account</mat-icon>
          </button>

      </ul>
    </mat-toolbar>

    <table class="table table-striped">
      <thead>
          <tr>
              <td><input type="checkbox" [(ngModel)]="selectedAll" (change)="selectAll();" ></td>
              <td>ID</td>
              <td>Username</td>
              <td>Role</td>
              <td>Registration Date</td>
              <td>Last Loggin Date</td>
              <td>Block</td>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let user of allUsers">
              <td><input type="checkbox" [(ngModel)]="user.selected" ></td>
              <ng-template [ngTemplateOutlet]="loadTemplate(user)"
                          [ngTemplateOutletContext]="{ $implicit: user}">
              </ng-template>
          </tr>
      </tbody>
      <ng-template #readOnlyTemplate let-user>
          <td>{{user.id}}</td>
          <td>{{user.username}}</td>
          <td>{{user.role}}</td>
          <td>{{user.regdate}}</td>
          <td>{{user.logdate}}</td>
          <td>{{user.blocked}}</td>
      </ng-template>
      </table>
  </div>
</div>
